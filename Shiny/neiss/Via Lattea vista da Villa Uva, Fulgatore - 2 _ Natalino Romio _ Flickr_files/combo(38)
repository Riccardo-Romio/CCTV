YUI.add("hermes-template-ad-rail-card",(function(a,e){var r=a.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(a,e,r,l,t){var n,i=a.lookupProperty||function(a,e){if(Object.prototype.hasOwnProperty.call(a,e))return a[e]};return'<div class="ad-rail-card">\n\t<div class="ad-rail-content-container">\n'+(null!=(n=a.invokePartial(i(l,"prbd-moola-position"),e,{name:"prbd-moola-position",hash:{upgradeProLink:null!=(n=null!=e?i(e,"adConfig"):e)?i(n,"upgradeProLink"):n,upsellFallback:null!=e?i(e,"upsellFallback"):e,adUnit:null!=(n=null!=e?i(e,"adConfig"):e)?i(n,"adUnit"):n},data:t,indent:"\t\t",helpers:r,partials:l,decorators:a.decorators}))?n:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),l={};a.Array.each(["prbd-moola-position"],(function(e){var r=a.Template.get("hermes/"+e);r&&(l[e]=r)})),a.Template.register("hermes/ad-rail-card",(function(e,t){return(t=t||{}).partials=t.partials?a.merge(l,t.partials):l,r(e,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("ad-rail-card-view",(function(e,i){require("hermes-core/flog")(i);var a=new e.SubscriptionsHelper;e.namespace("Views")[this.name]=e.Base.create("ad-rail-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},loadState:function(){return e.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("ad-rail-card",{adConfig:{adUnit:e.config.flickr.moola.positions.feed[6].ad_unit_desktop,upgradeProLink:a.getProLandingPageUrl(a.UTM_HIDE_ADS)},upsellFallback:!this.appContext.flipper.isFlipped("enable-next-millenium")})},activate:function(){return this.appContext.adManager.processAdsOnPage(),e.Analytics.sendClick("Rail Card Type: Ad","Rail Card Loaded"),e.Promise.resolve()}})}),"@VERSION@",{requires:["flickr-view","hermes-template-ad-rail-card","subscriptions-helper"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});YUI.add("hermes-template-feed-rail",(function(e,t){var n=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,i){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="feed-rail">\n\t<div class="dummy-loader">\n\t\t<div class="box container-box" style="height: 230px"></div>\n\t\t<div class="box container-box" style="height: 400px"></div>\n\t\t<div class="box container-box" style="height: 200px"></div>\n\t</div>\n\n\t<div class="feed-rail-content-container invisible">\n\n\t\t<div class="rail-items-container">\n\t\t\t\n\t\t</div>\n\n\t\t'+e.escapeExpression((l(n,"outlet")||t&&l(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?l(t,"slim-footer-view"):t,{name:"outlet",hash:{},data:i,loc:{start:{line:14,column:2},end:{line:14,column:29}}}))+"\n\t</div>\n</div>\n"},useData:!0}),a={};e.Array.each([],(function(t){var n=e.Template.get("hermes/"+t);n&&(a[t]=n)})),e.Template.register("hermes/feed-rail",(function(t,i){return(i=i||{}).partials=i.partials?e.merge(a,i.partials):a,n(t,i)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("group-recommended-models",(function(e,t){require("hermes-core/flog")(t);function r(e){r.superclass.constructor.call(this,e)}e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,parseGroupModel:function(t){var r,n=[],i=new e.PhotoSizeHelper(this.appContext);return r=void 0!==t.pathAlias&&""!==t.pathAlias?t.pathAlias:t.nsid,e.each(t.photos.photo,(function(t){var o,u=i.parseApiSizes(t.sizes.size,!0);o=null!==t.ownerPathAlias&&""!==t.ownerPathAlias?t.ownerPathAlias:t.ownerNsid,n.push({url:e.URLHelper.getFarmURL(t.farm,t.server,t.id,t.secret,"q"),link:e.URLHelper.getPhotoPage({photoId:t.id,pathAlias:o,contextSuffix:"pool-"+r}),sizes:u,aspectRatio:i.getPhotoAspectRatio(u)})})),{id:t.id,title:t.name,pathAlias:t.path_alias,memberCount:t.members,poolCount:t.pool_count,topicCount:t.topic_count,privacy:t.privacy,photos:n,buddyicon:e.APIHelper.response.removeProtocolFromURL(t.iconurls)}},attributes:{title:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)},defaultValue:""},pathAlias:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||void 0},defaultFn:function(e){return e}},memberCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},poolCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},topicCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},privacy:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultFn:function(e){return 0}},buddyicon:{},url:{derivedBy:["pathAlias"],defaultFn:function(e){return"/groups/"+(this.getValue(e,"pathAlias")||e)+"/"}},urlMembersPage:{readOnly:!0,derivedBy:["url"],defaultFn:function(e){return this.getValue(e,"url")+"members"}},urlPoolPage:{readOnly:!0,derivedBy:["url"],defaultFn:function(e){return this.getValue(e,"url")+"pool"}},urlDiscussionPage:{readOnly:!0,derivedBy:["url"],defaultFn:function(e){return this.getValue(e,"url")+"discuss"}},photos:{}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","api-helper","url-helper","moment","attribute-helpers"],optionalRequires:["hermes-core"]});YUI.add("feed-rail-helper",(function(e,t){require("hermes-core/flog")(t);e.FeedRailHelper=function(t,o){var r={},s=new e.PhotoCardHelper(t);return{loadRailData:function(){var e,o=this;return e={extras:this.constructExtras()},t.callAPI("flickr.feed.getRightRail",e).then((function(e){return o.parseResponse(e)})).then((function(e){return r}))},parseResponse:function(t){var o=this,s=t.cards,n=[];return r={},Object.keys(s).forEach((function(e){var t=s[e],i=e in o.parseResponseData?o.parseResponseData[e]:void 0;i&&n.push(i(t).then((function(t){return r[e]=t,t})))})),e.Promise.all(n)},parseResponseData:{statsFree:function(o){var r={};new e.TimezoneHelper(t,e.moment(),"+00:00").toFormat("YYYY-MM-DD");return o&&"views"in o&&(r.viewCount=o.views),e.Promise.resolve(r)},statsPro:function(o){var r,n={},i=new e.TimezoneHelper(t,e.moment(),"+00:00").toFormat("YYYY-MM-DD");if(o&&o.photos?(n.photoItems=[],r=new e.FlickrPromise({personModelRegistry:t.getModelRegistry("person-models"),photoModelRegistry:t.getModelRegistry("photo-models"),photoEngagementModelRegistry:t.getModelRegistry("photo-engagement-models"),photoStatsModelRegistry:t.getModelRegistry("photo-stats-models")}).then((function(t){return o.photos.forEach((function(o,r){var i;if(null!==o.id)return i=e.APIHelper.response.parsePhotos({photos:[o],personModelRegistry:t.personModelRegistry,photoModelRegistry:t.photoModelRegistry,photoEngagementModelRegistry:t.photoEngagementModelRegistry,photoStatsModelRegistry:t.photoStatsModelRegistry})[0],n.photoItems.push(Object.assign({dayCounts:{views:parseInt(o.stats.views,10),faves:parseInt(o.stats.favorites,10),comments:parseInt(o.stats.comments,10)}},s.convertPhotoModel(i))),i})),n.photoItems}))):r=e.Promise.resolve(),o&&"views"in o&&(n.dayCounts={views:i in o.views?o.views[i].total:0}),o&&o.graph){var a=o.graph[0]||{},l=Object.keys(a);n.graphData={},l.forEach((function(e){n.graphData[e]={date:a[e].date,day:a[e].day,ownerId:a[e].ownerId,comments:parseInt(a[e].comments,10),favs:parseInt(a[e].favs,10),views:parseInt(a[e].views,10)}}))}return r.then((function(){return n}))},groupRecommendations:function(t){return t?this.appContext.getModelRegistry("group-recommended-models").then((function(e){return t.map((function(t){var o=e.parseGroupModel(t);return o.url="/groups/"+o.id,o})).slice(0,2)})):e.Promise.resolve()},groupDiscussions:function(t){var o=[];return t&&t.length>0&&t.forEach((function(t){if(t.topics){var r=t.topics[0],s=t.pathAlias||t.id,n={id:e.guid(),groupId:t.id,groupName:t.name._content,iconUrls:t.iconurls,url:"/groups/"+s,topic:{id:r.id,subject:r.subject,lastPostDate:r.datelastpost,url:"/groups/"+s+"/discuss/"+r.id}};o.push(n)}})),e.Promise.resolve(o)},explore:function(t){return t?this.appContext.getModelRegistry("photo-lite-models").then((function(o){var r=t.map((function(t){var r=e.APIHelper.response.parsePhotoLite(t);return o.addOrUpdate(r)}));return r.map((function(e){return s.convertPhotoModel(e)}))})):e.Promise.resolve()},blog:function(t){var o;return o={id:"latest",blogId:t.guid,title:t.title,date:t.date,link:t.link,description:t.description,photoId:t.photoId,photoData:{id:t.photo.id,title:t.photo.title,description:t.photo.description,sizes:e.APIHelper.response.parsePhotoSize(t.photo.sizes.size,!0)}},e.Promise.resolve(o)},static:function(t){var o;return o={id:"latest",title:t.title,subtitle:t.subtitle,link:t.link,description:t.content,photoId:t.photoId,photoData:{id:t.photo.id,title:t.photo.title,description:t.photo.description,sizes:e.APIHelper.response.parsePhotoSize(t.photo.sizes.size,!0),owner:{displayname:t.photo.ownername}}},e.Promise.resolve(o)}},constructExtras:function(){var t,o="";return o=e.APIHelper.request.getRebootPhotoExtras(),o+=",can_addmeta,can_comment,can_download,can_share,contact,count_comments,count_faves,count_views,date_taken,date_upload,description,icon_urls_deep,isfavorite,ispro,license,media,needs_interstitial,owner_name,owner_datecreate,path_alias,perm_print,realname,rotation,safety_level,secret_k,secret_h,url_sq,url_q,url_t,url_s,url_n,url_w,url_m,url_z,url_c,url_l,url_h,url_k,url_3k,url_4k,url_f,url_5k,url_6k,url_o,visibility,visibility_source,o_dims,publiceditability",o+=",icon_urls, sizes",t=(o+=",icon_urls").split(","),o=(t=t.filter((function(e,o){return t.indexOf(e)===o}))).join(",")}}}}),"@VERSION@",{requires:["api-helper","group-recommended-models","moment","photo-card-helper"],optionalRequires:["hermes-core"],langBundles:["common"]});YUI.add("hermes-template-slim-footer",(function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'\t\t<a  class="trustarc-cookie-pref-link" href="/help/cookies">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"policy-terms.COOKIES"},data:t,loc:{start:{line:12,column:61},end:{line:12,column:108}}}))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,a,n,l,t){var s,o=null!=a?a:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,m=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="slim-footer">\n\t<a href="/about" data-track="footer-about">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:t,loc:{start:{line:2,column:44},end:{line:2,column:83}}}))+'</a>\n\t<a href="/jobs" data-track="footer-jobs">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.JOBS"},data:t,loc:{start:{line:3,column:42},end:{line:3,column:80}}}))+'</a>\n\t<a target="_blank" href="//blog.flickr.net/en" data-track="footer-blog">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.BLOG"},data:t,loc:{start:{line:4,column:73},end:{line:4,column:111}}}))+'</a>\n\t<a href="/services/developer" data-track="footer-developers">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:t,loc:{start:{line:5,column:62},end:{line:5,column:106}}}))+'</a>\n\t<a href="/help/guidelines" data-track="footer-guidelines">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:t,loc:{start:{line:6,column:59},end:{line:6,column:103}}}))+'</a>\n\t<a target="_blank" href="//flickrhelp.com" data-track="footer-help">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:t,loc:{start:{line:7,column:69},end:{line:7,column:107}}}))+'</a>\n\t<a href="/help/forum" data-track="footer-forum">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:t,loc:{start:{line:8,column:49},end:{line:8,column:93}}}))+'</a>\n\t<a href="/help/privacy" data-track="footer-privacy">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:t,loc:{start:{line:9,column:53},end:{line:9,column:94}}}))+'</a>\n\t<a href="/help/terms" data-track="footer-terms">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:t,loc:{start:{line:10,column:49},end:{line:10,column:88}}}))+"</a>\n"+(null!=(s=(m(n,"isFlipped")||a&&m(a,"isFlipped")||i).call(o,"enable-cookie-consent-execution-hermes",{name:"isFlipped",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:11,column:1},end:{line:13,column:15}}}))?s:"")+'\t<div class="foot-li lang-switcher">\n\t\t<a href="/change_language.gne?lang='+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"code"):s,a))+"&csrf="+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"csrf"):s,a))+'" data-track="footer-language">'+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"name"):s,a))+'</a>\n\t\t<div class="arrow">\n\t\t\t<svg class="icon icon-caret-down"><use xlink:href="#icon-caret-down"></use></svg>\n\t\t</div>\n\t </div>\n</div>\n\t\n'},useData:!0}),l={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)})),e.Template.register("hermes/slim-footer",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,n(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("footer-helper",(function(e,r){require("hermes-core/flog")(r);var n=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],o={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};e.FooterHelper=function(r,a){var t,s,i,u,c,d=[],l=r.lang;for(u=r.auth&&r.auth.csrf?r.auth.csrf:"","vi-vn"===l.toLowerCase()&&(l="vn-VN"),c={code:l,name:o[l],csrf:u},s=0,i=n.length;s<i;s++)n[s]!==l&&"string"==typeof n[s]&&d.push({code:n[s].toLowerCase(),name:o[n[s]],csrf:u});t=d.map((function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}));var f={createDropAround:function(n,o){var a,s;(s=n.one("a")).addClass("dimmed"),(a=new e.Views.FluidDroparound({appContext:r,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:"lang-droparound",menuItems:t})).show(),o.registerEventHandler(a.on("closeDroparound",(function(e){s.removeClass("dimmed")})))},getTemplateParams:function(){return{selectedLang:c,helpLocaleKey:c.code.replace("-","_")||"en_US",menuLangs:d}}};return e.augment(f,e.EventTarget),f}}),"@VERSION@",{requires:["fluid-droparound-view","event-custom"],optionalRequires:["hermes-core"]});YUI.add("slim-footer-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.footerHelper=new e.FooterHelper(this.appContext,{}),this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t=this.footerHelper.getTemplateParams(),YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),this.setContainerWithTemplate("slim-footer",t),this},activate:function(){var e,t=this,r=this.get("container");return this.registerEventHandler(r.delegate("click",(function(r){e=r.target.ancestor(".lang-switcher",!0),r.preventDefault(),t.footerHelper.createDropAround(e,t)}),".lang-switcher")),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-slim-footer","url-helper","footer-helper"],langBundles:["common","policy-terms"]});YUI.add("hermes-lang-policy-terms",(function(e,l){e.Intl.add("hermes/policy-terms","en-US",{DOWNLOAD_TERMS_OF_SERVICE:[{type:0,value:"Download Terms of Service"}],DOWNLOAD_PRIVACY_POLICY:[{type:0,value:"Download Privacy Policy"}],DOWNLOAD_API_TERMS:[{type:0,value:"Download API Terms of Service"}],DOWNLOAD_COMMUNITY_GUIDELINES:[{type:0,value:"Download Community Guidelines"}],DOWNLOAD_COOKIE_POLICY:[{type:0,value:"Download Cookie Policy"}],DOWNLOAD_DATA_PROCESSING_POLICY:[{type:0,value:"Download Data Processing Policy"}],POLICIES_AND_GUIDELINES:[{type:0,value:"Policies & Guidelines"}],TERMS:[{type:0,value:"Terms"}],PRIVACY:[{type:0,value:"Privacy"}],API:[{type:0,value:"API"}],COMMUNITY:[{type:0,value:"Community"}],COOKIES:[{type:0,value:"Cookies"}],DATA_PROCESSING:[{type:0,value:"Data Processing"}]})}),"@VERSION@",{requires:["intl"]});